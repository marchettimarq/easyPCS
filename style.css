
:root{
  --bg:#0F1A33; --card:#121A2C; --text:#E6EAF5; --muted:#9AA7C7; --border:#20283A;
  --brand:#2F6BFF; --brand-2:#1E53E6; --ok:#22c55e; --warn:#fbbf24;
  --tap:56px; --radius:16px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:16px -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
.topbar{position:sticky;top:0;z-index:20;background:#0c1428;border-bottom:1px solid var(--border);
  padding:calc(env(safe-area-inset-top,0) + 10px) 16px 10px;display:flex;align-items:center;justify-content:space-between}
.brand{margin:0;font-size:26px;font-weight:800;letter-spacing:.2px}
.brand span{color:var(--brand)}
.pill{border:1px solid var(--border);background:transparent;color:var(--text);padding:10px 14px;border-radius:999px}
.pill.primary-btn{background:var(--brand);border-color:transparent;color:#fff}
.pill.ghost{background:transparent}
#view{padding:12px 16px calc(90px + env(safe-area-inset-bottom,0))}
.bottom-nav{position:fixed;left:0;right:0;bottom:0;background:#0c1428;border-top:1px solid var(--border);
  display:flex;gap:12px;justify-content:space-around;align-items:center;
  padding:10px 16px calc(10px + env(safe-area-inset-bottom,0))}
.nav-btn{min-width:var(--tap);min-height:var(--tap);border:0;background:transparent;color:var(--text);
  display:flex;flex-direction:column;align-items:center;gap:4px;border-radius:14px}
.nav-btn .icon{width:28px;height:28px;display:block}
.nav-btn.primary{background:var(--brand);color:#fff;min-width:64px;min-height:64px;border-radius:18px;
  box-shadow:0 8px 24px rgba(47,107,255,.35)}
.nav-btn.primary .icon{width:36px;height:36px}
.nav-btn .label{font-size:12px;color:var(--muted)}

/* Phase cards vertical + collapsed by default */
.phase-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);
  padding:14px;margin:12px 0;box-shadow:0 6px 18px rgba(0,0,0,.25)}
.phase-head{display:flex;align-items:center;justify-content:space-between;min-height:56px}
.phase-title{margin:0;font-size:18px;font-weight:800}
.meta{color:var(--muted);font-size:12px;margin-top:4px}
.progress{height:6px;background:#091125;border-radius:999px;overflow:hidden;margin-top:8px}
.progress span{display:block;height:100%;background:linear-gradient(90deg,var(--brand),var(--brand-2));width:0%}
.task-list{margin-top:10px}
.phase-card.collapsed .task-list{display:none}

/* Task rows */
.task-row{display:flex;gap:12px;align-items:flex-start;background:#0f182e;border:1px solid var(--border);
  border-radius:12px;padding:12px;margin-top:10px}
.chk{min-width:28px;height:28px;border-radius:50%;border:2px solid var(--muted);display:grid;place-items:center;
  font-size:18px;cursor:pointer;background:transparent;color:transparent}
.chk.done{border-color:var(--brand);background:var(--brand);color:#fff}
.task-main{flex:1;min-width:0}
.task-title{margin:0 0 4px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;word-break:break-word;font-weight:600}
.task-date{font-size:12px;color:var(--muted)}
.row-actions{display:flex;gap:6px}
.icon-btn{min-width:40px;min-height:40px;border-radius:10px;border:1px solid var(--border);background:#1a2440;color:var(--text)}
.task-desc{display:none;color:var(--muted);padding:6px 12px 12px 52px}
.task-row.expanded + .task-desc{display:block}
.empty{color:var(--muted);text-align:center;padding:18px}

/* Modal sheet */
.backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(4px);z-index:60}
.sheet{position:fixed;left:0;right:0;bottom:0;background:var(--card);border-radius:18px 18px 0 0;
  border:1px solid var(--border);z-index:70;padding:12px 16px 16px}
.sheet-header{display:flex;align-items:center;justify-content:space-between}
.sheet-body label{display:block;margin-top:10px;font-size:14px}
.sheet-body input, .sheet-body textarea, .sheet-body select{width:100%;margin-top:6px;padding:10px;border-radius:12px;border:1px solid var(--border);background:#0f182e;color:var(--text)}
.sheet-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:12px}
.hidden{display:none}
.req{color:#f87171;margin-left:4px}
